---
layout: post
title: DDoS攻击应对
category: net
typora-root-url: ../..
---

参考<破坏之王-DDoS攻击与防范深度剖析>一书.

### 如何应对攻击

#### 攻击的治理: 

依靠运营商和网络提供商, 中小企业大多无能为力



#### 攻击的缓解: 

可以从技术运维和程序的技术角度来做缓解. 主要缓解的方式:

1. 攻击流量的稀释: CDN技术和anycast技术

   

2. 攻击流量的清洗: 通过规则匹配或一些特殊方法来进行包过滤, 技术包括: 包括: IP信誉检查(即我们的恶意ip库), 攻击特征匹配, 速度检查与限制, TCP代理和检验, 协议完整性检验和客户端真实性检验等. 

   目前做这方面工作的开源软件有: 

   https://www.globalsign.com/en/blog/how-to-prevent-a-ddos-attack-on-a-cloud-server

   主要软件fastnetmon: https://github.com/FastVPSEestiOu/fastnetmon

两者关系: 先稀释, 后清洗; 稀释就是让分布式攻击达到多台节点上, 分散攻击流量. 如果所有流量都压到某台清洗设备上, 那台清洗设备也会不堪重负. 所以只有分散攻击流量, 才能接着利用清洗设备来识别和丢弃攻击流量.





### 阿里云DDoS攻击应对交流

阿里云产品及其原理

#### BGP高防

1. 需要使用阿里云DNS/anycast ip来牵引流量: 高防实现是因为阿里云有自己的AS号, 可以做BGP协议的anycast ip技术.
2. 可以对抗1.5 ~ 2T攻击流量
3. 如果还被攻陷, 也只有运营商封禁ip或自身黑洞ip

#### 原生防护

1. 3~5G攻击流量
2. 超过就黑洞ip

#### 游戏盾

1. 需要安装客户端sdk, 负责加速, 加密, 以及将用户分组. 确保攻击只影响部分用户
2. 没必要, 效果上和XXMYGW类似