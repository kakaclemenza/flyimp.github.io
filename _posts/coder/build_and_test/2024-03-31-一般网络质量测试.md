---
layout: post
title: 一般网络质量测试
category: coder
typora-root-url: ../../..
---

### 丢包率, 抖动

```shell
# 服务端
iperf -s -u

# 客户端
iperf -u -c 112.73.64.90 -p20002 -t 10 -b 5m
```



注意, 本地测试时, 要了解自己的本地带宽限制, 比如自己本地其实只有0.5MB的流量上限, 去使用默认的1MB带宽测出来的服务端收包肯定有50%以上的丢包没有收到

另外, iperf3版本客户端和服务端要对应的上.

### 大包测试

可以使用ping -s 方便的进行任意大小的包进行测试, 指定除去8B icmp包头后的内容大小.

```shell
ping -s 9000 10.99.0.2
```

大包主要用于测试网络中各个节点MTU值的设定带来的影响. 如果是二层网络直接中转包, 则二层网络每个交换节点port应该保持相同的MTU, 如果某个port MTU值比较小, 则大包会被直接丢弃, **表现为ping测试不通**

如果是三层以上隧道封装的overlay网络, 则不存在不通问题, 如果是加上隧道包头之后超出底层网卡port的MTU, 则会进行ip分片, 增加处理成本. **表现为ping测试明显延迟高于小于MTU的包的测试值.**



### tc模拟网络变动测试

