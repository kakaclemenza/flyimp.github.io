---
layout: post
title: 音视频后端架构总结
category: app
typora-root-url: ../../..
---

## 语音服架构





## 衍生功能实现

### 变声

```shell
C --> OSS --> wts
```

1. 客户端上传音频到oss
2. oss将音频发送到wts
3. wts上的变声库执行变声，变声算法来源于客户端
4. 变声库输出变声后的音频，返回oss，oss再返回客户端

### 翻译

```shell
C --websocket协议--> wts接口转发 --> 调用AI、阿里云、百度
```

1. 客户端通过websocket协议上传语音分片数据到wts
2. wts调用AI团队、阿里云或百度的语音翻译接口，获得翻译后的文字
3. wts将翻译后的文字传回客户端

### 好声音

其实实现的功能比较简单，就是将正常的语音流拷贝一份存到临时文件，然后将临时文件存至oss备用即可。

### 语音电台

```shell
AS --推流--> CDN --> 客户端拉流
```

未来：使用rtmp协议。

### 混音

自研混音算法，cpp编写，经常崩溃。

### 降噪

客户端降噪算法，webrtc+rnnoise